# questionnaire-api
Django Rest Framework questionnaire API

API для проведения опросов пользователей.
Регистрация и авторизация не предусмотрена.
Доступные действия:

1. Управление списком опросов (CRUD-операции):
http://127.0.0.1:8000/questionnaires/ - POST, GET (выдаются только актуальные опросы с датой завершения более текущей даты) 
http://127.0.0.1:8000/questionnaires/<int:pk>/ - GET, PUT
Для уже созданных опросов при обновлении методом PUT запрещено изменение поля start_date 

Поля опроса:
title - наименование (строка (макс. 500 символов))
start_date - дата начала (дата и время)
end_date - дата завершения (дата и время)
body - описание (неограниченная строка)



2. Управление вопросами к опросам (CRUD-операции):
http://127.0.0.1:8000/questions/ - POST, GET
http://127.0.0.1:8000/questions/<int:pk>/ - GET, PUT 
http://127.0.0.1:8000/questionnaires/<int:pk>/questions/ - GET, список всех вопросов по конкретному опросу

Поля вопроса:
title - текст вопроса (строка (макс. 500 символов))
question_type - тип вопроса (строка с ограниченным списком значений - 'text'/'single_choice'/multiple_choices)
questionnaire - внешний ключ к опросам (целое число)


3. Управление доступными ответами к вопросам: (CRUD-операции):
http://127.0.0.1:8000/answers/ - POST, GET
http://127.0.0.1:8000/answers/<int:pk>/ - GET, PUT 
http://127.0.0.1:8000/questions/<int:pk>/answers/ - GET, список всех доступных ответов по конкретному вопросу<br> 

Поля ответа:
text - текст ответа (строка (макс. 500 символов))
question - внешний ключ к вопросам (целое число)


4. Запись в систему фактических ответов пользователей на вопросы опроса.
Ответ (текст ответа) записывается в разрезе id пользователя и id вопроса.
http://127.0.0.1:8000/polls/ - GET, PUT 
http://127.0.0.1:8000/polls/answers/?user_id=<int:id> - GET с параметром 'user_id': получение списка всех ответов пользователя с user_id = id

Поля фактического ответа пользователя:
user_id - идентификатор пользователя (целое число)
question - внешний ключ к вопросам (целое число)
user_answer - фактический текст ответа (строка (макс. 500 символов))

Предварительные шаги для запуска приложения (на тестовом сервере):
1. Установить пакеты согласно файлу requirements.txt (pip install -r requirements.txt)
2. В django shell выполнить последовательно команды: 
python manage.py createsuperuser
python manage.py makemigrations
python manage.py migrate
python manage.py runserver (приложение будет доступно в отладочном режиме по указанным выше урлам).
